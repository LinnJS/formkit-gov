# Accessibility Audit

Perform an accessibility audit on components or pages.

## Instructions

You are performing an accessibility audit following WCAG 2.1 AA standards.

### Audit Scope

1. **Automated Testing**
   - Run axe-core on components
   - Check for violations
   - Review warnings and incomplete items

2. **Manual Testing**
   - Keyboard navigation
   - Screen reader compatibility
   - Focus management
   - Color contrast
   - Error handling

3. **Code Review**
   - ARIA attributes
   - Semantic HTML
   - Label associations
   - Focus indicators

### WCAG 2.1 AA Checklist

#### Perceivable

- [ ] **1.1.1** Non-text content has text alternatives
- [ ] **1.3.1** Info and relationships are programmatically determined
- [ ] **1.3.2** Meaningful sequence preserved
- [ ] **1.4.1** Color is not the only visual means of conveying info
- [ ] **1.4.3** Contrast ratio at least 4.5:1 for normal text
- [ ] **1.4.4** Text can be resized to 200% without loss of content

#### Operable

- [ ] **2.1.1** All functionality available from keyboard
- [ ] **2.1.2** No keyboard trap
- [ ] **2.4.1** Skip links available (if applicable)
- [ ] **2.4.3** Focus order is logical
- [ ] **2.4.6** Headings and labels are descriptive
- [ ] **2.4.7** Focus is visible

#### Understandable

- [ ] **3.1.1** Language of page is programmatically determined
- [ ] **3.2.1** No unexpected context changes on focus
- [ ] **3.2.2** No unexpected context changes on input
- [ ] **3.3.1** Errors are identified and described
- [ ] **3.3.2** Labels or instructions provided for input
- [ ] **3.3.3** Error suggestions provided when known

#### Robust

- [ ] **4.1.1** No major parsing errors
- [ ] **4.1.2** Name, role, value available for UI components

### Form-Specific Requirements

```typescript
// Required attributes for form fields
<input
  id="unique-id"
  aria-describedby="error-id hint-id"
  aria-invalid={hasError}
  aria-required={required}
/>

// Error association
<span id="error-id" role="alert">
  Error message
</span>

// Label association
<label htmlFor="unique-id">
  Label text
</label>
```

### Testing Tools

```bash
# Run component tests with axe
pnpm --filter @formkit-gov/react test

# Example test with axe
import { axe, toHaveNoViolations } from 'jest-axe';

expect.extend(toHaveNoViolations);

it('has no accessibility violations', async () => {
  const { container } = render(<Component />);
  const results = await axe(container);
  expect(results).toHaveNoViolations();
});
```

### Common Issues to Check

1. **Missing Labels**

   ```typescript
   // Bad
   <input type="text" />

   // Good
   <label>
     Name
     <input type="text" />
   </label>
   ```

2. **Missing Error Association**

   ```typescript
   // Bad
   <input />
   <span>Error message</span>

   // Good
   <input aria-describedby="error-1" aria-invalid="true" />
   <span id="error-1" role="alert">Error message</span>
   ```

3. **Focus Not Visible**

   ```css
   /* Bad */
   *:focus {
     outline: none;
   }

   /* Good */
   *:focus {
     outline: 2px solid #005ea2;
   }
   ```

4. **Non-Keyboard Accessible**

   ```typescript
   // Bad
   <div onClick={handleClick}>Click me</div>

   // Good
   <button onClick={handleClick}>Click me</button>
   ```

### Audit Report Format

```markdown
## Accessibility Audit Report

**Component/Page:** [Name] **Date:** [Date] **Standard:** WCAG 2.1 AA

## Summary

- Critical issues: X
- Serious issues: X
- Moderate issues: X
- Minor issues: X

## Issues Found

### Critical

#### Issue 1: [Description]

**WCAG Criterion:** X.X.X **Impact:** [Who is affected] **Location:** [File:line]

**Current:** \`\`\`typescript // problematic code \`\`\`

**Recommended:** \`\`\`typescript // fixed code \`\`\`

## Passing Criteria

- [x] 1.1.1 Non-text content
- [x] 2.1.1 Keyboard accessible
- ...
```

## Arguments

$ARGUMENTS - Component or page to audit (e.g., "TextInputField component" or "all form components")
